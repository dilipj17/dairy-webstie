{% load static %}
<script src="{%static 'vendor/jquery/jquery-3.2.1.min.js'%}"></script>
<h3 class="text-center">Add item</h3>
<form enctype="multipart/form-data" method="POST">
  {% csrf_token %}
  <div class="input-group">
    {{ form.form }}
      <a href="#" onclick="openwindow(0,0)">add item</a>
    <span>
      <button class="btn btn-info" type="submit">submit</button>
    </span>
  </div>
</form>
<div>
    <table>
      {%for item in items %}
      <tr>
        <td>{{item.item}}</td>
        <td>{{item.quantity}}</td>
        <td>{{item.price}}</td>
        <td><a href='#' onclick="openwindow(1,{{item.pk}})" id="{{item.pk}}-update" data-url="{%url 'item:edittempitem' item.pk %}">update</a></td>
        <td><a href='#' onclick="openwindow(2,{{item.pk}})" id="{{item.pk}}-delete" data-url="{%url 'item:deletetempitem' item.pk %}">delete</a></td>
      </tr>
        {%endfor%}
    </table>
  <br>
  <div id="data"></div>
</div>
<script type="text/javascript">
  function openwindow(i,id){
    var url;
    if (i==0) {
      url = "{%url 'item:addtempitem'%}";
    }
    else if (i==1) {
      var opt = document.getElementById(id+'-update');
      url = opt.dataset.url;
    }
    else {
      var opt = document.getElementById(id+'-delete');
      url = opt.dataset.url;
    }
    newwindow = window.open(url,"Form","width=500,height=500,left=400,top=400");
  }
  function loadData(){
    $.ajax(
      {
        type:"GET",
        url:"{%url 'item:list'%}",
        success:function(data){
          $('#data').html(data);
        }
      }
    )
  }
</script>
